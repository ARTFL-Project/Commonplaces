<div infinite-scroll="addMoreResults()" infinite-scroll-distance="1" infinite-scroll-disabled="loadingData" infinite-scroll-immediate-check="false">
    <spinner show="{{ loading }}"></spinner>
    <h4 ng-if="!loading">
        Your query returned
        <span class="dots" ng-if="waitingForCount"><span>.</span><span>.</span><span>.</span></span>
        {{ totalCount }} results
    </h4>
    <facet-search></facet-search>
    <div class="panel panel-default result alignment" ng-repeat="passage in commonplaces | limitTo: displayLimit track by $index">
        <h5 class="result-number">{{ ::$index + 1}}</h5>
        <h5>
            <b>{{ ::passage.author }}</b>,
            <i>{{ ::passage.title }}</i>&nbsp;
            <b>[{{ ::passage.date }}]</b>
        </h5>
        <p>
            {{ ::passage.leftContext }}
            <span class="highlight">
                {{ ::passage.matchContext }}
            </span>
            {{ ::passage.rightContext}}
        </p>
        <p>
            <a href="/passage/{{ main.dbActive }}/{{passage.passageID}}" ng-if="passage.passageIDCount > 1">
                View similar passages in timeline
                <span ng-if="main.webConfig.debug">
                    ({{ passage.passageIDCount }} PhiloLine matching pairs)
                </span>
            </a>
        </p>
    </div>
    <div style="text-align: center;" ng-show="loadingData">
        <h4>Loading data...</h4>
    </div>
</div>
